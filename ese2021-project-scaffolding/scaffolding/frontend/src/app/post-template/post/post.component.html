
<mat-card *ngIf="post != undefined && !editMode" >
  <button mat-mini-fab *ngIf="canEdit" class="edit" [matMenuTriggerFor]="edit" #menuTrigger="matMenuTrigger" (click)="menuTrigger.openMenu()"> Edit
  <mat-menu #edit="matMenu">
    <button mat-menu-item class="dropdown" (click)="editPost()">
      <span>Edit Post</span>
    </button>
    <button mat-menu-item class="dropdown" (click)="deletePost()">
      <span>Delete Post</span>
    </button>
  </mat-menu>
  </button>
  <button *ngIf="!upvoted" class="unclicked" (click)="upvote()"  > &#8679;</button>
  <button *ngIf="upvoted" class="clicked" (click)="revertUpvote()"> &#8679;</button>
    {{post.votes}}
  <button *ngIf="!downvoted" class="unclicked" (click)="downvote()">&#8681;</button>
  <button *ngIf="downvoted" class="clicked" (click)="revertDownvote()">&#8681;</button>
  <br>
  <br>
  <mat-card-title>{{post.title}}  </mat-card-title>
    <mat-chip-list>
      <mat-chip>{{categoryName}}</mat-chip>
    </mat-chip-list>
  <mat-card-content *ngIf="!collapse">
    {{post.content}}
    <div *ngIf="uncollapse">
      <button mat-icon-button  (click)="(collapse=!collapse) && (uncollapse = false)"><mat-icon>expand_less</mat-icon></button>
    </div>
  </mat-card-content>
  <div *ngIf="collapse">
  <mat-card-content >
    {{preview}}
      <button mat-icon-button (click)="collapse=!collapse; uncollapse=true"><mat-icon>expand_more</mat-icon></button>
  </mat-card-content>

  </div>

</mat-card>
<mat-card *ngIf="editMode">
  <button mat-flat-button class="close" (click)="discardEdits()">Discard</button>
  <br>
  <mat-form-field appearance="fill" style="width: 60%;">
    <input matInput type="text" placeholder= {{post.title}} name="title" [(ngModel)]="post.title">
  </mat-form-field>
  <mat-form-field appearance="fill">
    <mat-label>{{categoryName}}</mat-label>
    <mat-select required [(ngModel)]="categoryName">
    </mat-select>
  </mat-form-field>
  <br>
  <mat-form-field appearance="outline" style="width: 100%; height: 40%">
    <textarea matInput placeholder={{post.content}} style="width: 100%" rows="10" name="content"[(ngModel)]="post.content"></textarea>
  </mat-form-field>
  <button mat-button (click)="updatePost()">Update Post</button>
</mat-card>
